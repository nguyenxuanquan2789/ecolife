(function(c){Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var b=6-a.length-1;0<=b;b--)a="0"+a;return"#"+a};c.widget("wp.wpColorPicker",c.wp.wpColorPicker,{_create:function(){if(c.support.iris){var a=this,b=a.element;c.extend(a.options,b.data());a.close=c.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');
a.wrap=b.parent();a.toggler=c('<a tabindex="0" class="wp-color-result" />').insertBefore(b).css({backgroundColor:a.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current);a.pickerContainer=c('<div class="wp-picker-holder" />').insertAfter(b);a.button=c('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):a.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear);
b.wrap('<span class="wp-picker-input-wrap" />').after(a.button);var d=function(e){a.options.alpha?(a.toggler.css({"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==)"}).html("<span />"),a.toggler.find("span").css({top:"3px",left:"3px",
bottom:"3px",right:"3px",position:"absolute","border-top-left-radius":"3px","border-bottom-left-radius":"3px",background:e.toString()})):a.toggler.css({backgroundColor:e.toString()})};b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,change:function(e,f){d(f.color);c.isFunction(a.options.change)&&a.options.change.call(this,e,f)}});b.val(a.initialValue);d(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=
this;a.wrap.on("click.wpcolorpicker",function(b){b.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(b){if(""===c(this).val()||a.element.hasClass("iris-error"))a.options.alpha?a.toggler.find("span").css("backgroundColor",""):a.toggler.css("backgroundColor",""),c.isFunction(a.options.clear)&&a.options.clear.call(this,b)});a.toggler.on("keyup",function(b){if(13===b.keyCode||32===b.keyCode)b.preventDefault(),a.toggler.trigger("click").next().focus()});
a.button.click(function(b){c(this).hasClass("wp-picker-clear")?(a.element.val(""),a.options.alpha?a.toggler.find("span").css("backgroundColor",""):a.toggler.css("backgroundColor",""),c.isFunction(a.options.clear)&&a.options.clear.call(this,b)):c(this).hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})}});c.widget("a8c.iris",c.a8c.iris,{_create:function(){this._super();this.options.alpha=this.element.data("alpha")||!1;this.element.is(":input")||(this.options.alpha=!1);
if("undefined"!==typeof this.options.alpha&&this.options.alpha){var a=this,b=a.element,d=c('<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>').appendTo(a.picker.find(".iris-picker-inner")),e=d.find(".iris-slider-offset-alpha");d={aContainer:d,aSlider:e};a.options.defaultWidth=b.width();1>a._color._alpha||a._color.toString().indexOf("rgb");b.width(parseInt(a.options.defaultWidth+100));c.each(d,function(k,h){a.controls[k]=h});
a.controls.square.css({"margin-right":"0"});b=a.picker.width()-a.controls.square.width()-20;var f=b/6,g=b/2-f;c.each(["aContainer","strip"],function(k,h){a.controls[h].width(g).css({"margin-left":f+"px"})});a.setAlphaSliderBackground();a._initControls()}},_initControls:function(){this._super();if(this.options.alpha){var a=this;a.controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*a._color._alpha),slide:function(b,d){a._color._alpha=parseFloat(d.value/100);a._change.apply(a,
arguments);var e=a._color.toString();e!==a.element.val()&&a.element.val(e).keyup()}})}},_change:function(){this._super();var a=this,b=a.element;if(this.options.alpha){var d=a.controls,e=parseInt(100*a._color._alpha),f=a.picker.closest(".wp-picker-container").find(".wp-color-result");a.setAlphaSliderBackground();f.hasClass("wp-picker-open")&&(d.aSlider.slider("value",e),1>a._color._alpha&&d.strip.attr("style",d.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,
"rgb($1$3$5)")))}if(b.data("reset-alpha"))a.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){a._color._alpha=1;a.active="external";a._change()})},_addInputListeners:function(a){var b=this,d=function(e){var f=new Color(a.val()),g=a.val();a.removeClass("iris-error");f.error?""!==g&&a.addClass("iris-error"):f.toString()!==b._color.toString()&&("keyup"===e.type&&g.match(/^[0-9a-fA-F]{3}$/)||b._setOption("color",f.toString()))};a.on("change",d).on("keyup",b._debounce(d,
100));if(b.options.hide)a.one("focus",function(){b.show()})},setAlphaSliderBackground:function(){var a=this._color.toRgb();this.controls.aContainer.css({background:"linear-gradient(to bottom, "+["rgb("+a.r+","+a.g+","+a.b+") 0%","rgba("+a.r+","+a.g+","+a.b+", 0) 100%"].join(", ")+"), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==)"})}})})(jQuery);