/*!
 * Dialogs Manager v3.1.2
 * https://github.com/cobicarmel/dialogs-manager/
 *
 * Copyright Kobi Zaltzberg
 * Released under the MIT license
 * https://github.com/cobicarmel/dialogs-manager/blob/master/LICENSE.txt
 */
(function(k,r){var f={widgetsTypes:{},createWidgetType:function(b,a,d){d||(d=this.Widget);var h=function(){d.apply(this,arguments)};b=h.prototype=new d(b);k.extend(b,a);b.constructor=h;h.extend=function(l,n){return f.createWidgetType(l,n,h)};return h},addWidgetType:function(b,a,d){return a&&a.prototype instanceof this.Widget?this.widgetsTypes[b]=a:this.widgetsTypes[b]=this.createWidgetType(b,a,d)},getWidgetType:function(b){return this.widgetsTypes[b]},Instance:function(){var b=this,a={};this.createWidget=
function(d,h){var l=new (f.getWidgetType(d))(d);h=h||{};l.init(b,h);l.setMessage(h.message);return l};this.getSettings=function(d){return d?a[d]:Object.create(a)};this.init=function(d){k.extend(a,{classPrefix:"dialog",effects:{show:"fadeIn",hide:"fadeOut"}},d);k("body");return b};b.init()},Widget:function(b){var a=this,d={},h={},l={},n=function(){a.getElements("window").on("keyup",p);if(d.hideOnBackgroundClick)a.getElements("widget").on("click",function(c){c.target===this&&a.hide()})},q=function(c,
e){var g=d.effects[c],m=l.widget;if(k.isFunction(g))g.apply(m,e);else if(m[g])m[g].apply(m,e);else throw"Reference Error: The effect "+g+" not found";},t=function(){var c=a.getClosureMethods()||[];k.each(c,function(){var e=a[this];a[this]=function(){e.apply(a,arguments)}})},u=function(){var c=a.getSettings();k.each(c,function(e){if(e=e.match(/^on([A-Z].*)/))e=e[1].charAt(0).toLowerCase()+e[1].slice(1),a.on(e,this)})},v=function(c){return c.replace(/([a-z])([A-Z])/g,function(e,g,m){return g+"-"+m.toLowerCase()})},
p=function(c){27===c.which&&a.hide()},w=function(){a.getElements("window").off("keyup",p)};this.addElement=function(c,e,g){e=l[c]=k(e||"<div>");var m=d.classes.prefix+"-";c=v(c);g||(g=c);m=m+c+(" "+d.classes.globalPrefix+"-"+g);e.addClass(m);return e};this.getSettings=function(c){var e=Object.create(d);return c?e[c]:e};this.init=function(c,e){if(!(c instanceof f.Instance))throw"The "+a.widgetName+" must to be initialized from an instance of DialogsManager.Instance";t();a.trigger("init",e);var g=c.getSettings();
d={effects:g.effects,classes:{globalPrefix:g.classPrefix,prefix:g.classPrefix+"-"+b,widget:"dialog-widget"},container:"body",hideOnBackgroundClick:!0};k.extend(!0,d,a.getDefaultSettings(),e);u();a.addElement("widget");a.addElement("message");a.addElement("window",window);a.addElement("container",d.container);(g=a.getSettings("id"))&&a.setID(g);(g=a.getSettings("className"))&&a.getElements("widget").addClass(g);a.buildWidget();a.attachEvents&&a.attachEvents();a.on("show",n);a.on("hide",w);a.trigger("ready");
return a};this.getElements=function(c){return c?l[c]:l};this.hide=function(){q("hide",arguments);a.trigger("hide");return a};this.on=function(c,e){h[c]||(h[c]=[]);h[c].push(e);return a};this.setMessage=function(c){l.message.html(c);return a};this.setID=function(c){a.getElements("widget").attr("id",c);return a};this.setSettings=function(c,e){"object"===typeof e?k.extend(!0,d[c],e):d[c]=e};this.show=function(){l.widget.appendTo(l.container);q("show",arguments);a.trigger("show");return a};this.trigger=
function(c,e){var g="on"+c[0].toUpperCase()+c.slice(1);if(a[g])a[g](e);(g=h[c])&&k.each(g,function(m,x){x.call(a,e)})}}};f.Widget.prototype.buildWidget=function(){var b=this.getElements();b.widget.html(b.message)};f.Widget.prototype.getDefaultSettings=function(){return{}};f.Widget.prototype.getClosureMethods=function(){};f.Widget.prototype.onHide=function(){};f.Widget.prototype.onShow=function(){};f.Widget.prototype.onInit=function(){};f.Widget.prototype.onReady=function(){};f.addWidgetType("lightbox",
{getDefaultSettings:function(){return{position:{my:"center",at:"center"},headerMessage:"",contentWidth:"auto",contentHeight:"auto",closeButton:!1,refreshPosition:!0}},getClosureMethods:function(){return["refreshPosition"]},buildWidget:function(){var b=this.addElement("widgetHeader"),a=this.addElement("widgetContent"),d=this.getElements();a.append(b,d.message);d.widget.html(a);this.getSettings("closeButton")&&(b=this.addElement("closeButton",'<div><i class="fa fa-times"></i></div>'),a.prepend(b))},
refreshPosition:function(){var b=this.getElements(),a=this.getSettings("position");a&&(a.of=b.widget,b.widgetContent.position(a))},attachEvents:function(){if(this.getSettings("closeButton"))this.getElements("closeButton").on("click",this.hide)},onHide:function(){this.getElements("window").off("resize",this.refreshPosition)},onReady:function(){var b=this.getElements(),a=this.getSettings();"auto"!==a.contentWidth&&b.message.width(a.contentWidth);"auto"!==a.contentHeight&&b.message.height(a.contentHeight);
this.setHeaderMessage(a.headerMessage)},onShow:function(){this.refreshPosition();if(this.getSettings("refreshPosition"))this.getElements("window").on("resize",this.refreshPosition)},setHeaderMessage:function(b){this.getElements("widgetHeader").html(b);return this}});f.addWidgetType("options",f.getWidgetType("lightbox").extend("options",{activeKeyUp:function(b){9===b.which&&b.preventDefault();if(this.hotKeys[b.which])this.hotKeys[b.which](this)},activeKeyDown:function(b){if(9===b.which){b.preventDefault();
var a=this.focusedButton.index();b.shiftKey?(b=a-1,0>b&&(b=this.buttons.length-1)):(b=a+1,b>=this.buttons.length&&(b=0));this.focusedButton=this.buttons[b].focus()}},addButton:function(b){var a=this,d=a.addElement(b.name,k("<button>").text(b.text));a.buttons.push(d);var h=function(){a.getSettings("hideOnButtonClick")&&a.hide();k.isFunction(b.callback)&&b.callback.call(this,a)};d.on("click",h);b.hotKey&&(this.hotKeys[b.hotKey]=h);this.getElements("buttonsWrapper").append(d);b.focus&&(this.focusedButton=
d);return a},bindHotKeys:function(){this.getElements("window").on({keyup:this.activeKeyUp,keydown:this.activeKeyDown})},buildWidget:function(){f.getWidgetType("lightbox").prototype.buildWidget.apply(this,arguments);var b=this.addElement("buttonsWrapper");this.getElements("widgetContent").append(b)},getClosureMethods:function(){return f.getWidgetType("lightbox").prototype.getClosureMethods.apply(this,arguments).concat(["activeKeyUp","activeKeyDown"])},getDefaultSettings:function(){var b=f.getWidgetType("lightbox").prototype.getDefaultSettings.apply(this,
arguments);k.extend(!0,b,{position:{at:"center center-100"},hideOnButtonClick:!0});return b},onHide:function(){f.getWidgetType("lightbox").prototype.onHide.apply(this,arguments);this.unbindHotKeys()},onInit:function(){this.buttons=[];this.hotKeys={};this.focusedButton=null},onShow:function(){f.getWidgetType("lightbox").prototype.onShow.apply(this,arguments);this.bindHotKeys();this.focusedButton||(this.focusedButton=this.buttons[0]);this.focusedButton&&this.focusedButton.focus()},unbindHotKeys:function(){this.getElements("window").off({keyup:this.activeKeyUp,
keydown:this.activeKeyDown})}}));f.addWidgetType("confirm",f.getWidgetType("options").extend("confirm",{onReady:function(){f.getWidgetType("options").prototype.onReady.apply(this,arguments);var b=this.getSettings("strings"),a="cancel"===this.getSettings("defaultOption");this.addButton({name:"cancel",text:b.cancel,callback:function(d){d.trigger("cancel")},focus:a});this.addButton({name:"ok",text:b.confirm,callback:function(d){d.trigger("confirm")},focus:!a})},getDefaultSettings:function(){var b=f.getWidgetType("options").prototype.getDefaultSettings.apply(this,
arguments);b.strings={confirm:"OK",cancel:"Cancel"};b.defaultOption="cancel";return b}}));f.addWidgetType("alert",f.getWidgetType("options").extend("alert",{onReady:function(){f.getWidgetType("options").prototype.onReady.apply(this,arguments);var b=this.getSettings("strings");this.addButton({name:"ok",text:b.confirm,callback:function(a){a.trigger("confirm")}})},getDefaultSettings:function(){var b=f.getWidgetType("options").prototype.getDefaultSettings.apply(this,arguments);b.strings={confirm:"OK"};
return b}}));f.addWidgetType("popup",{getDefaultSettings:function(){return{position:{my:"center",at:"center",of:window},hide:{delay:5E3}}},onShow:function(){this.getElements("message").position(this.getSettings("position"));setTimeout(this.hide,this.getSettings("hide").delay)}});r.DialogsManager=f})("function"===typeof require?require("jquery"):jQuery,"undefined"!==typeof module?module.exports:window);